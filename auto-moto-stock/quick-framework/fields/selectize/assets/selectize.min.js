var SQUICK_SelectizeClass=function(e){this.$container=e};!function(e){"use strict";SQUICK_SelectizeClass.prototype={init:function(){var e=this,t=e.$container.find(".squick-selectize"),n={plugins:["remove_button"],onInitialize:function(){e.onChange(this)},onChange:function(){e.onChange(this),e.$container.find("[data-field-control]").first().trigger("squick_field_control_changed")}};t.attr("multiple")||t.data("allow-clear")&&(n.allowEmptyOption=!0,n.onItemAdd=function(){e.addRemoveButton(this)},n.onItemRemove=function(){e.addRemoveButton(this)}),t.data("tags")&&(n.create=!0,n.persist=!1),t.data("drag")&&(n.plugins[1]="drag_drop"),t.find("option.empty-select").remove(),setTimeout((function(){var e=t.selectize(n)[0].selectize,i=t.data("value");void 0!==i&&e.setValue(i),t.data("field-no-change",!1),t.data("field-set-value",!1)}),1)},onChange:function(e){var t=this,n=t.$container.find(".squick-selectize"),i=t.$container.find(".squick-selectize-edit-link"),a=t.$container.find(".squick-selectize-create-link"),o=n.val(),l=t.$container.find(".selectize-control");if(i.length)if(0==l.find(".squick-selectize-edit-link").length&&i.detach().appendTo(l),""===o||"inherit"===o)i.hide();else{i.show();var c=i.data("link");c=c.replace("{{value}}",o),i.attr("href",c)}a.length&&0==l.find(".squick-selectize-create-link").length&&a.detach().appendTo(l)},addRemoveButton:function(t){if(""!=t.getValue()){if(0==t.$control.find(".selectize-remove").length){t.$control.append('<span class="selectize-remove dashicons dashicons dashicons-no-alt"></span>');var n=t;e(".selectize-remove",t.$control).on("click",(function(){n.setValue("")}))}}else e(".selectize-remove",this.$control).remove()},getValue:function(){return this.$container.find("[data-field-control]").val()}}}(jQuery);