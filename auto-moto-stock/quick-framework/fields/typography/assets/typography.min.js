var SQUICK_TypographyClass=function(n){this.$container=n};!function(n){"use strict";SQUICK_TypographyClass.prototype={init:function(){this.fontSizeChange(),this.fontFamilyChange(),this.variantChange(),this.colorField()},fontSizeChange:function(){var n=this;this.$container.find(".squick-typography-size-value,.squick-typography-size-unit").on("change",(function(){var i=n.$container.find(".squick-typography-size-value"),t=n.$container.find(".squick-typography-size-unit"),a=n.$container.find(".squick-typography-size");""!=i.val()&&a.val(i.val()+""+t.val()),n.changeField()}))},fontFamilyChange:function(){var n=this;this.$container.find(".squick-typography-font-family").on("change",(function(){n.bindFontVariants(),n.$container.find(".squick-typography-variants").trigger("change")}))},variantChange:function(){var i=this;this.$container.find(".squick-typography-variants").on("change",(function(){var t=n(this).val();-1!=t.indexOf("italic")?i.$container.find(".squick-typography-style").val("italic"):i.$container.find(".squick-typography-style").val(""),t=t.replace("italic",""),i.$container.find(".squick-typography-weight").val(t),i.changeField()}))},bindFontVariants:function(){var n,i=this.$container.find(".squick-typography-font-family"),t=this.$container.find(".squick-typography-variants"),a=i.val(),e={},o=t.val();for(n in SQUICK_TYPOGRAPHY_META_DATA.activeFonts)if(SQUICK_TYPOGRAPHY_META_DATA.activeFonts[n].family==a){e=SQUICK_TYPOGRAPHY_META_DATA.activeFonts[n];break}var r="",s=!1;if(null!=e.variants)for(n in e.variants)"regular"===e.variants[n].toLowerCase()&&(e.variants[n]="400"),o===e.variants[n]?(r+='<option value="'+e.variants[n]+'" selected="selected">'+e.variants[n]+"</option>",s=!0):r+='<option value="'+e.variants[n]+'">'+e.variants[n]+"</option>";t.html(r),s||t.prepend('<option value="'+o+'" selected="selected">'+o+" (Missing Variant)</option>")},changeField:function(){this.$container.find(".squick-typography-font-family").trigger("squick_field_control_changed")},getValue:function(){var i={};return this.$container.find("[data-field-control]").each((function(){var t=n(this),a=t.attr("name").replace(/^(.*)(\[)([^\]]*)(\])*$/g,(function(n,i,t,a,e){return a}));i[a]=t.val()})),i},colorField:function(){var i=this,t=n.extend({change:function(){setTimeout((function(){i.changeField()}),50)},clear:function(){setTimeout((function(){i.changeField()}),50)}});n().wpColorPicker&&this.$container.find(".squick-typography-color").wpColorPicker(t)}}}(jQuery);