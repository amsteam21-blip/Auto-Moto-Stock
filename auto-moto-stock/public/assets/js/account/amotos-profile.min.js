!function(e){"use strict";e(document).ready((function(){if("undefined"!=typeof amotos_profile_vars){var a=amotos_profile_vars.ajax_url,s=amotos_profile_vars.ajax_upload_url,r=amotos_profile_vars.file_type_title,i=amotos_profile_vars.amotos_site_url,n=amotos_profile_vars.confirm_become_manager_msg,o=amotos_profile_vars.confirm_leave_manager_msg;e(".amotos-update-profile").validate({ignore:":hidden",errorElement:"span",rules:{user_firstname:{required:!0},user_lastname:{required:!0},user_email:{required:!0},user_mobile_number:{required:!0}},messages:{user_firstname:"",user_lastname:"",user_email:"",user_mobile_number:""}}),e("#amotos_update_profile").on("click",(function(){var s=e(this),r=s.parents("form"),i=s.text();r.valid()&&e.ajax({type:"POST",url:a,dataType:"json",data:{action:"amotos_update_profile_ajax",user_firstname:e("#user_firstname").val(),user_lastname:e("#user_lastname").val(),user_des:e("#user_des").val(),user_position:e("#user_position").val(),user_email:e("#user_email").val(),user_mobile_number:e("#user_mobile_number").val(),user_fax_number:e("#user_fax_number").val(),user_company:e("#user_company").val(),user_licenses:e("#user_licenses").val(),user_office_number:e("#user_office_number").val(),user_office_address:e("#user_office_address").val(),user_facebook_url:e("#user_facebook_url").val(),user_twitter_url:e("#user_twitter_url").val(),user_linkedin_url:e("#user_linkedin_url").val(),user_pinterest_url:e("#user_pinterest_url").val(),user_instagram_url:e("#user_instagram_url").val(),user_skype:e("#user_skype").val(),user_youtube_url:e("#user_youtube_url").val(),user_vimeo_url:e("#user_vimeo_url").val(),user_website_url:e("#user_website_url").val(),profile_pic:e("#profile-pic-id").val(),amotos_security_update_profile:e("#amotos_security_update_profile").val()},beforeSend:function(){AMOTOS.show_loading()},success:function(e){AMOTOS.close_loading(0),e.success?AMOTOS.popup_alert("fa fa-check-square-o",i,e.message):AMOTOS.popup_alert("fa fa-exclamation-triangle",i,e.message)},error:function(){AMOTOS.close_loading(0)}})})),e(".amotos-change-password").validate({errorElement:"span",rules:{oldpass:{required:!0},newpass:{required:!0,minlength:4},confirmpass:{required:!0}},messages:{oldpass:"",newpass:"",confirmpass:""}}),e("#amotos_change_pass").on("click",(function(){var s,r,n,o,l=e(this),_=l.parents("form"),u=l.text();r=e("#oldpass").val(),n=e("#newpass").val(),o=e("#confirmpass").val(),s=e("#amotos_security_change_password").val(),_.valid()&&e.ajax({type:"POST",dataType:"json",url:a,data:{action:"amotos_change_password_ajax",oldpass:r,newpass:n,confirmpass:o,amotos_security_change_password:s},beforeSend:function(){AMOTOS.show_loading()},success:function(e){e.success?window.location.href=i:(AMOTOS.close_loading(0),AMOTOS.popup_alert("fa fa-exclamation-triangle",u,e.message))},error:function(){AMOTOS.close_loading(0)}})})),e("#amotos_user_as_manager").on("click",(function(){var s=e(this).text();AMOTOS.confirm_dialog(s,n,(function(){e.ajax({type:"post",url:a,dataType:"json",data:{action:"amotos_register_user_as_manager_ajax",amotos_security_become_manager:e("#amotos_security_become_manager").val()},beforeSend:function(){AMOTOS.show_loading()},success:function(e){e.success?(AMOTOS.close_loading(0),AMOTOS.popup_alert("fa fa-check-square-o",s,e.message),setTimeout((function(){window.location.reload()}),3e3)):(AMOTOS.close_loading(0),AMOTOS.popup_alert("fa fa-exclamation-triangle",s,e.message))},error:function(){AMOTOS.close_loading(0)}})}))})),e("#amotos_leave_manager").on("click",(function(){var s=e(this).text();AMOTOS.confirm_dialog(s,o,(function(){e.ajax({type:"post",url:a,dataType:"json",data:{action:"amotos_leave_manager_ajax",amotos_security_leave_manager:e("#amotos_security_leave_manager").val()},beforeSend:function(){AMOTOS.show_loading()},success:function(e){e.success?window.location.reload():(AMOTOS.show_loading(),AMOTOS.popup_alert("fa fa-exclamation-triangle",s,e.message))},error:function(){AMOTOS.show_loading()}})}))}));var l=new plupload.Uploader({browse_button:"amotos_select_profile_image",file_data_name:"amotos_upload_file",container:"amotos_profile_plupload_container",multi_selection:!1,url:s,filters:{mime_types:[{title:r,extensions:"jpg,jpeg,gif,png"}],max_file_size:"2000kb",prevent_duplicates:!0}});l.init(),l.bind("FilesAdded",(function(e,a){var s="";plupload.each(a,(function(e){s+='<div id="holder-'+e.id+'" class="profile-thumb"></div>'})),document.getElementById("user-profile-img").innerHTML=s,e.refresh(),l.start()})),l.bind("UploadProgress",(function(e,a){document.getElementById("holder-"+a.id).innerHTML='<span><i class="fa fa-spinner fa-spin"></i></span>'})),l.bind("Error",(function(e,a){document.getElementById("errors_log").innerHTML+="<br/>Error #"+a.code+": "+a.message})),l.bind("FileUploaded",(function(a,s,r){var i=e.parseJSON(r.response);if(i.success){var n='<img src="'+i.url+'"/><input type="hidden" class="profile-pic-id" id="profile-pic-id" name="profile-pic-id" value="'+i.attachment_id+'"/>';document.getElementById("holder-"+s.id).innerHTML=n}})),e("#remove-profile-image").on("click",(function(e){e.preventDefault(),document.getElementById("user-profile-img").innerHTML='<div class="profile-thumb"></div>'}))}}))}(jQuery);