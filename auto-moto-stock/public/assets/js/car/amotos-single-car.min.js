var AMOTOS_SINGLE_CAR=AMOTOS_SINGLE_CAR||{};!function(e){"use strict";var t=e("body"),i=(e(window),e(document),t.hasClass("rtl"));(AMOTOS_SINGLE_CAR={init:function(){var t=e(".car-gallery-wrap");this.gallery(t),this.print()},gallery:function(t){var n=t.find(".single-car-image-main"),a=t.find(".single-car-image-thumb");n.owlCarousel({items:1,nav:!0,navElement:"div",navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],dots:!1,loop:!1,smartSpeed:500,autoHeight:!0,rtl:i}).on("changed.owl.carousel",(function(e){var t=e.item.index;a.find(".owl-item").removeClass("current").eq(t).addClass("current");var i=a.find(".owl-item.active").length-1,n=a.find(".owl-item.active").first().index(),s=a.find(".owl-item.active").last().index();t>s&&a.data("owl.carousel").to(t,500,!0);t<n&&a.data("owl.carousel").to(t-i,500,!0)})),a.on("initialized.owl.carousel",(function(){a.find(".owl-item").eq(0).addClass("current")})).owlCarousel({items:5,navElement:"div",nav:!1,dots:!1,rtl:i,margin:9,responsive:{1200:{items:5},992:{items:4},768:{items:3},0:{items:2}}}).on("changed.owl.carousel",(function(e){var t=e.item.index;n.data("owl.carousel").to(t,500,!0)})),a.on("click",".owl-item",(function(t){if(t.preventDefault(),!e(this).hasClass("current")){var i=e(this).index();n.data("owl.carousel").to(i,500,!0)}}))},print:function(){e("#car-print").on("click",(function(t){t.preventDefault();var n=e(this),a=n.data("car-id"),s=(n.data("ajax-url"),window.open("",amotos_single_car_vars.localization.print_window_title,"scrollbars=0,menubar=0,resizable=1,width=991 ,height=800"));e.ajax({type:"POST",url:amotos_single_car_vars.ajax_url,data:{action:"car_print_ajax",car_id:a,isRTL:i},success:function(e){s.document.write(e),s.document.close(),s.focus()}})}))}}).MAP={map:null,marker:null,autoComplete:null,directionsService:null,directionsDisplay:null,id:"amotos__single_car_map",elements:{$wrap:null,$input:null,$total:null,$number:null,$btn:null},lat:"",lng:"",init:function(){this.elements.$wrap=e(".amotos__single-car-map-directions"),0!==this.elements.$wrap.length&&(this.elements.$input=this.elements.$wrap.find(".amotos__scmd-input"),this.elements.$btn=this.elements.$wrap.find(".amotos__scmd-btn"),this.elements.$total=this.elements.$wrap.find(".amotos__scmd-total"),this.elements.$number=this.elements.$wrap.find(".amotos__scmd-number"),this.setupMap(),this.direction())},setupMap:function(){var e=this,t=AMOTOS_MAP.getInstance(this.id);e.map=t.instance,e.autoComplete=new AMOTOS_MAP.Autocomplete(e.elements.$input[0]),e.autoComplete.change((function(t){t&&(e.lat=t.latitude,e.lng=t.longitude)})),e.map.markers&&(e.marker=e.map.markers[0]),e.directionsService=new AMOTOS_MAP.DirectionsService,e.directionsDisplay=new AMOTOS_MAP.DirectionsRenderer},direction:function(){var e=this;e.elements.$btn.on("click",(function(t){if(t.preventDefault(),""===e.elements.$input.val())return e.marker.show(),e.directionsDisplay.clear(),void e.elements.$total.hide();e.directionsDisplay.setMap(e.map);var i={origin:e.marker.getPosition(),destination:new AMOTOS_MAP.LatLng(e.lat,e.lng)};e.directionsService.route(i,(function(t){t&&(e.directionsDisplay.setDirections(t),e.marker.hide())}))})),e.directionsDisplay.change((function(t){e.getDistance(t)}))},getDistance:function(e){var t="m";switch(amotos_map_vars.units){case"kilometre":e/=1e3,t="km";break;case"mile":e*=621371e-9,t="mi";break}this.elements.$number.html(e+" "+t),this.elements.$total.show()}},e(document).on("maps:loaded",(function(){AMOTOS_SINGLE_CAR.MAP.init()})),e(document).ready((function(){AMOTOS_SINGLE_CAR.init()}))}(jQuery);